var Db = require('Database');
/*
 * domain/main-single?q=tag
 * tag split with ","
 * sent via ajax
 */
module.exports = function(req, res){
  var result = [];
  console.log('tagPostMethod.js req.body.q_arr')
  console.log(req.body.q_arr)
  if(typeof req.body.q_arr !== 'object'){
    res.end(JSON.stringify({message: 'maybe you dont send me an array?'}));
		return;
	}
  Db.db.collection('Questions').find({tag: {$in: req.body.q_arr}}).toArray(function(err, docs){
    if(err){
      console.log(err);
			return;
		}
    docs.forEach(function(element){
      result.push(element)
    });
    res.end(JSON.stringify(result));
		return;
  });
}
